package com.kucaroom.mypicture.shiro.realm;import com.kucaroom.mypicture.DTO.AdminDTO;import com.kucaroom.mypicture.util.MD5Util;import lombok.extern.slf4j.Slf4j;import org.apache.shiro.SecurityUtils;import org.apache.shiro.authc.UsernamePasswordToken;import org.apache.shiro.authc.credential.HashedCredentialsMatcher;import org.apache.shiro.mgt.DefaultSecurityManager;import org.apache.shiro.subject.Subject;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.test.context.junit4.SpringRunner;@Slf4j@SpringBootTest@RunWith(SpringRunner.class)public class CustomRealmTest {    @Autowired    private CustomRealm customRealm;    @Test    public void doGetAuthenticationInfoTest(){        //设置securityManager环境        DefaultSecurityManager defaultSecurityManager = new DefaultSecurityManager();        defaultSecurityManager.setRealm(customRealm);        //加密        HashedCredentialsMatcher matcher = new HashedCredentialsMatcher();        matcher.setHashAlgorithmName("md5");        matcher.setHashIterations(MD5Util.hashIterations);//加密两次        customRealm.setCredentialsMatcher(matcher);        //主体提交认证请求        SecurityUtils.setSecurityManager(defaultSecurityManager);        Subject subject = SecurityUtils.getSubject();        UsernamePasswordToken usernamePasswordToken = new UsernamePasswordToken("875307054@qq.com","bingbing");        subject.login(usernamePasswordToken);        log.info("是否认证通过:{}",subject.isAuthenticated());    }}