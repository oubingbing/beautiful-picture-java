<!DOCTYPE html><html><head>    <meta charset="UTF-8">    <title>欢迎页面-X-admin2.0</title>    <meta name="renderer" content="webkit">    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />    <link rel="stylesheet" href="/static/css/font.css">    <link rel="stylesheet" href="/static/css/xadmin.css">    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">    <style>        .picture-container{            width: 97%;            position: relative;            border-style:solid;            border-width:1px;            border-color: darkgray;            padding-left: 20px;            padding-right: 20px;            padding-bottom: 20px;            display: flex;            flex-direction: column;            padding-top: 40px;        }        .picture-container .picture-item{            width: 100%;            height: 150px;            z-index: 1;            box-shadow: 0px 0px 7px 2px gainsboro;            border-radius: 5px;            margin-right: 20px;            margin-bottom: 20px;            word-break:break-all;            display: flex;            flex-direction: row;        }        .picture-item .content-item{            height: 100%;            width: 50%;            display: flex;            flex-direction: column;            padding: 10px;        }        .picture-item .operation-item{            height: 100%;            width: 30%;            display: flex;            flex-direction: row;            justify-content: center;            align-items: center;            padding: 10px;            position: relative;        }        .operation-item .btn{            padding: 5px;            z-index: 10;        }        .picture-item .image-item{            width: 20%;        }        .picture-item img{            width: 150px;            height: 150px;            border-radius: 5px;        }        .up-icon{            position: absolute;            z-index: 100;            right: 0px;            top: 0px;        }        .up-icon .label{            z-index: 120;            position: absolute;            transform:rotate(45deg);            color: white;            right: 6px;            top: 20px;        }        .up-icon img{            width: 70px;            height: 70px;            z-index: 110;            position: relative;        }        [v-cloak] {            display: none;        }    </style></head><body><div class="x-body layui-anim layui-anim-up">    <div class="x-nav">      <span class="layui-breadcrumb">        <a href="">首页</a>        <a href="">演示</a>        <a>          <cite>导航元素</cite></a>      </span>        <a class="layui-btn layui-btn-small" style="line-height:1.6em;margin-top:3px;float:right" href="javascript:location.replace(location.href);" title="刷新">            <i class="layui-icon" style="line-height:30px">ဂ</i></a>    </div>    <div class="x-body" id="app">        <div class="layui-row">            <form class="layui-form layui-col-md12 x-so">                <input class="layui-input" placeholder="开始日" name="start" id="start">                <input class="layui-input" placeholder="截止日" name="end" id="end">                <input type="text" name="username"  placeholder="请输入用户名" autocomplete="off" class="layui-input">                <button class="layui-btn"  lay-submit="" lay-filter="sreach"><i class="layui-icon">&#xe615;</i></button>            </form>        </div>        <blockquote class="layui-elem-quote">共有数据：{{total}} 条</blockquote>        <div class="picture-container">            <div class="picture-item" v-for="image in pictures" v-cloak>                <div class="image-item">                    <img v-bind:src="url+image.cover" alt="" v-cloak>                </div>                <div class="content-item">                    <div>标题: {{image.title}}</div>                    <div>内容: {{image.content}}</div>                </div>                <div class="operation-item">                    <div class="up-icon" v-if="image.status == 1">                        <span class="label">已上架</span>                        <img src="/static/images/up.png" alt="">                    </div>                    <div class="up-icon" v-else>                        <span class="label">已下架</span>                        <img src="/static/images/down.png" alt="">                    </div>                    <div class="btn">                        <a :href="'/admin/picture/detail?id='+image.id">                            <button class="layui-btn layui-btn-info">图集</button>                        </a>                    </div>                    <div class="btn">                        <button class="layui-btn layui-btn-warm"                                v-if="image.status == 1"                                v-on:click="changeStatus(image.id,2)">下架</button>                        <button class="layui-btn layui-btn-warm" v-else v-on:click="changeStatus(image.id,1)">上架</button>                    </div>                    <div class="btn"><button class="layui-btn layui-btn-warm" v-on:click="deleteImage(image.id)">删除</button></div>                </div>            </div>        </div>        <div class="page">            <el-pagination                    background                    @current-change="handleCurrentChange"                    layout="prev, pager, next"                    :page-size="page_size"                    :current-page="current_page"                    :total="total">            </el-pagination>        </div>    </div></div></body><script src="https://cdn.bootcss.com/vue/2.5.16/vue.min.js"></script><script src="https://unpkg.com/element-ui/lib/index.js"></script><script src="https://cdn.bootcss.com/axios/0.17.1/axios.min.js"></script><script>    'use strict';    var baseUrl = "http://picture.qiuhuiyi.cn/";    new Vue({        el: '#app',        data: {            pictures:[],            url:baseUrl,            total:0,            page_size:10,            current_page:1        },        created:function () {            this.getPictures();            console.log('用户首页');        },        methods:{            handleCurrentChange:function (e) {                console.log(e);                this.current_page = e;                this.getPictures();            },            getPictures:function () {                var url = "/admin/picture/list";                let _this = this;                axios.get(url+"?pageSize="+this.page_size+'&pageNumber='+this.current_page+'&order_by=created_at&sort_by=desc')                        .then( response=> {                            var res = response.data;                            if(res.code == 0){                                _this.pictures = res.data.content;                                _this.total = res.data.totalNumber;                            }else{                                console.log('error:'+res);                            }                        }).catch(function (error) {                    console.log(error);                });            },            detail:function (id) {                window.location.href = "/admin/picture/detail?id="+id;            },            /**             * 删除图片             **/            deleteImage:function(id){                let _this = this;                axios.delete("/admin/picture/delete/"+id)                        .then( response=> {                            var res = response.data;                            if(res.code == 0){                                var pictureArray = _this.pictures.filter(function (item) {                                    if(id != item.id){                                        console.log("id:"+id)                                        return item;                                    }                                })                                _this.pictures = pictureArray;                            }else{                                console.log('error:'+res);                            }                        }).catch(function (error) {                    console.log(error);                });            },            /**             * 删除图片             **/            changeStatus:function(id,status){                let _this = this;                axios.post("/admin/picture/status/"+id,{status:status})                        .then( response=> {                    var res = response.data;                if(res.code == 0){                    let pictureArray = _this.pictures.map(item=>{                        if(item.id == id){                          item.status = status;                        }                        return item;                    })                    _this.pictures = pictureArray;                }else{                    console.log('error:'+res);                }            }).catch(function (error) {                    console.log(error);                });            },        }    })</script></html>