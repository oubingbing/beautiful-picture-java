<!doctype html><html lang="en"><head>    <meta charset="UTF-8">    <title>图集详情</title>    <meta name="renderer" content="webkit|ie-comp|ie-stand">    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />    <meta http-equiv="Cache-Control" content="no-siteapp" />    <link rel="stylesheet" href="/static/css/font.css">    <link rel="stylesheet" href="/static/css/font.css">    <link rel="stylesheet" href="/static/css/xadmin.css">    <style>        .div-input input{            padding: 10px;        }        .picture-container{            width: 97%;            position: relative;            border-style:solid;            border-width:1px;            border-color: darkgray;            padding-left: 20px;            padding-right: 20px;            padding-bottom: 20px;            display: flex;            flex-direction: row;            padding-top: 40px;            flex-wrap: wrap;        }        .picture-container .picture-item{            width: 150px;            height: 150px;            z-index: 1;            box-shadow: 0px 0px 7px 2px gainsboro;            border-radius: 5px;            margin-right: 20px;            margin-bottom: 20px;            word-break:break-all        }        .picture-item img{            width: 150px;            height: 120px;            border-top-left-radius: 5px;            border-top-right-radius: 5px;        }        .picture-item .upload-button{            padding: 5px;            border-bottom-left-radius: 5px;            border-bottom-right-radius: 5px;            text-align: center;        }        .picture-item .upload-success{            background: #009688;            color: white;        }        .picture-item .delete-container{            width: 150px;            height: 120px;            z-index: 20;            position: absolute;            display: flex;            flex-direction: column;            justify-content: center;            align-items: center;            background:rgba(2,2,2,0.6);            border-top-left-radius: 5px;            border-top-right-radius: 5px;            color: #009688;        }        [v-cloak] {            display: none;        }    </style></head><body><div class="x-body layui-anim layui-anim-up" id="app">    <blockquote class="layui-elem-quote" style="display: flex;flex-direction: row;justify-content: space-between;align-items: center">        上传图集        <button  class="layui-btn layui-btn-danger x-right" v-on:click="submit()">提交</button>    </blockquote>    <div class="picture-container">        <div class="picture-item" v-for="item in pictureItems" v-cloak>            <div class="image-item" @mouseenter="enter(item.id)" @mouseleave="leave(item.id)">                <div v-if="item.show" class="delete-container">                    <img style="width: 25px;height: 25px;" src="/static/images/delete.png" alt="删除" v-on:click="deleteImage(item.id)">                </div>                <img v-bind:src="url+item.pictureUrl" alt="" v-cloak>            </div>            <div>                <div class="upload-button upload-success" v-cloak>                    100                </div>            </div>        </div>    </div></div></body><style></style><script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><script type="text/javascript" src="https://unpkg.com/qiniu-js@2.0/dist/qiniu.min.js"></script><script src="/static/lib/layui/layui.js" charset="utf-8"></script><script type="text/javascript" src="/static/js/xadmin.js"></script><script type="text/javascript" src="/static/js/upload.js"></script><script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script><script src="https://cdn.bootcss.com/axios/0.17.1/axios.min.js"></script><script>    'use strict';    var baseUrl = "${domain}/";    var detailId = ${id};    new Vue({        el: '#app',        data: {            url:baseUrl,            pictureItems:[]        },        created:function () {            this.getPictures();        },        methods:{            getPictures:function () {                var url = "/admin/picture/"+detailId+"/detail";                let _this = this;                axios.get(url)                        .then( response=> {                            var res = response.data;                            if(res.code == 0){                               console.log(res)                                _this.pictureItems = res.data;                            }else{                                console.log('error:'+res);                            }                        }).catch(function (error) {                    console.log(error);                });            },            /**             * 监控图集进入事件             **/            enter:function(id){                var pictureItemArray = this.pictureItems;                pictureItemArray.map(function (item) {                    if(id == item.id){                        item.show = true;                    }                    return item;                })                this.pictureItems = pictureItemArray;            },            /**             * 监控图集移除事件             * */            leave:function(id){                var pictureItemArray = this.pictureItems;                pictureItemArray.map(function (item) {                    if(id == item.id){                        item.show = false;                    }                    return item;                })                this.pictureItems = pictureItemArray;            },            /**             * 删除图片             **/            deleteImage:function(id){                let _this = this;                axios.delete("/admin/picture/picture_item/delete/"+id)                        .then( response=> {                            var res = response.data;                            if(res.code == 0){                                var pictureItemArray = _this.pictureItems.filter(function (item) {                                    if(id != item.id){                                        console.log("id:"+id)                                        return item;                                    }                                })                                _this.pictureItems = pictureItemArray;                            }else{                                console.log('error:'+res);                            }                        }).catch(function (error) {                    console.log(error);                });            },        }    })</script></html>