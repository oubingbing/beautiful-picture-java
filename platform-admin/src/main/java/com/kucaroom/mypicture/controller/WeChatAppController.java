package com.kucaroom.mypicture.controller;import com.kucaroom.mypicture.DTO.WeChatAppDTO;import com.kucaroom.mypicture.domain.WeChatApp;import com.kucaroom.mypicture.enums.ResponseEnum;import com.kucaroom.mypicture.exception.WebApiException;import com.kucaroom.mypicture.responseObject.WeChatAppRes;import com.kucaroom.mypicture.service.WeChatAppService;import com.kucaroom.mypicture.util.ResponseData;import com.kucaroom.mypicture.util.ResponseUtil;import lombok.extern.slf4j.Slf4j;import net.sf.json.JSONObject;import org.springframework.beans.BeanUtils;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.util.StringUtils;import org.springframework.web.bind.annotation.PostMapping;import org.springframework.web.bind.annotation.RequestBody;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;import javax.servlet.http.HttpServletRequest;@Slf4j@Controller@RequestMapping("/admin")public class WeChatAppController {    @Autowired    private WeChatAppService weChatAppService;    @ResponseBody    @PostMapping("/app/edit")    public ResponseData<WeChatAppRes> editApp(HttpServletRequest request){        //Integer appId = (Integer)request.getAttribute("appId");        Integer appId = 74;        String key = request.getParameter("name");        String value = request.getParameter("value");        log.info("参数：{}",request.getParameter("name"));        if(StringUtils.isEmpty(key)){            throw new WebApiException(ResponseEnum.PARAM_ERROR);        }        if(StringUtils.isEmpty(value)){            throw new WebApiException(ResponseEnum.PARAM_ERROR);        }        WeChatAppDTO weChatAppDTO = weChatAppService.edit(appId,key,value);        WeChatAppRes weChatAppRes = new WeChatAppRes();        BeanUtils.copyProperties(weChatAppDTO,weChatAppRes);        return ResponseUtil.success(weChatAppRes);    }    @ResponseBody    @PostMapping("/app/update_logo")    public ResponseData<WeChatAppRes> editLogo(@RequestBody JSONObject jsonObject,HttpServletRequest request){        //Integer appId = (Integer)request.getAttribute("appId");        Integer appId = 74;        String value = (String) jsonObject.get("logo");        if(StringUtils.isEmpty(value)){            throw new WebApiException(ResponseEnum.PARAM_ERROR);        }        WeChatAppDTO weChatAppDTO = weChatAppService.edit(appId,"logo",value);        WeChatAppRes weChatAppRes = new WeChatAppRes();        BeanUtils.copyProperties(weChatAppDTO,weChatAppRes);        return ResponseUtil.success(weChatAppRes);    }}