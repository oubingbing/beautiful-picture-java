package com.kucaroom.mypicture.controller.checkAuth;import com.kucaroom.mypicture.DTO.AboutUsDTO;import com.kucaroom.mypicture.form.AboutUsForm;import com.kucaroom.mypicture.responseObject.AboutUsRes;import com.kucaroom.mypicture.service.AboutUsService;import com.kucaroom.mypicture.util.ResponseData;import com.kucaroom.mypicture.util.ResponseUtil;import org.springframework.beans.BeanUtils;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.PostMapping;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;import javax.servlet.http.HttpServletRequest;import javax.validation.Valid;@Controller@RequestMapping("/admin/about")public class AboutUsController {    @Autowired    private AboutUsService aboutUsService;    @ResponseBody    @GetMapping("/info")    public ResponseData<AboutUsRes> aboutInfo(HttpServletRequest request){        Integer appId = (Integer) request.getAttribute("appId");        AboutUsDTO aboutUsDTO = aboutUsService.findByAppId(appId);        if(aboutUsDTO != null){            AboutUsRes aboutUsRes = new AboutUsRes();            BeanUtils.copyProperties(aboutUsDTO,aboutUsRes);            return ResponseUtil.success(aboutUsRes);        }        return ResponseUtil.success(null);    }    /**     * 更新团队资料     *     * @author yezi     * @param request     * @param aboutUsForm     * @return     */    @ResponseBody    @PostMapping("/update")    public ResponseData<AboutUsRes> update(HttpServletRequest request, @Valid AboutUsForm aboutUsForm){        Integer appId = (Integer) request.getAttribute("appId");        AboutUsDTO aboutUsDTO = aboutUsService.findByAppId(appId);        AboutUsDTO result;        if(aboutUsDTO != null){            BeanUtils.copyProperties(aboutUsForm,aboutUsDTO);            result = aboutUsService.updateByAppId(aboutUsDTO);        }else{            AboutUsDTO newDTo = new AboutUsDTO();            BeanUtils.copyProperties(aboutUsForm,newDTo);            newDTo.setAppId(appId);            result = aboutUsService.create(newDTo);        }        return ResponseUtil.success(result);    }}