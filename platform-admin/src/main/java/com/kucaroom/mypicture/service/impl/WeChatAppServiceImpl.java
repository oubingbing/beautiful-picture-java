package com.kucaroom.mypicture.service.impl;import com.kucaroom.mypicture.DTO.WeChatAppDTO;import com.kucaroom.mypicture.domain.WeChatApp;import com.kucaroom.mypicture.enums.ResponseEnum;import com.kucaroom.mypicture.exception.WebApiException;import com.kucaroom.mypicture.repository.WeChatAppRepository;import com.kucaroom.mypicture.service.WeChatAppService;import org.springframework.beans.BeanUtils;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import java.util.Optional;@Servicepublic class WeChatAppServiceImpl implements WeChatAppService {    @Autowired    private WeChatAppRepository weChatAppRepository;    @Override    public WeChatApp findByAppId(Integer appId) {        Optional<WeChatApp> weChatAppOptional = weChatAppRepository.findById(appId);        if(!weChatAppOptional.isPresent()){            throw new WebApiException(ResponseEnum.APP_NOT_EXIST);        }        return weChatAppOptional.get();    }    /**     * 根据管理员查询小程序的信息     *     * @author yezi     * @param adminId     * @return     */    @Override    public WeChatAppDTO findByAdminId(Integer adminId) {        WeChatApp weChatApp = weChatAppRepository.findByAdminId(adminId);        if(weChatApp != null){            WeChatAppDTO weChatAppDTO = new WeChatAppDTO();            BeanUtils.copyProperties(weChatApp,weChatAppDTO);            return weChatAppDTO;        }        return null;    }    /**     * 编辑小程序     *     * @author yezi     * @param appId     * @param key     * @param value     * @return     */    @Override    public WeChatAppDTO edit(Integer appId,String key, String value) {        WeChatApp weChatApp = this.findByAppId(appId);        switch (key){            case "name":                weChatApp.setName(value);                break;            case "app_key":                weChatApp.setAppKey(value);                break;            case "app_secret":                weChatApp.setAppSecret(value);            case "logo":                weChatApp.setLogo(value);                break;        }        WeChatApp result = weChatAppRepository.save(weChatApp);        WeChatAppDTO weChatAppDTO = new WeChatAppDTO();        BeanUtils.copyProperties(result,weChatAppDTO);        return weChatAppDTO;    }}