package com.kucaroom.mypicture.repository;import com.kucaroom.mypicture.domain.WeChatApp;import com.kucaroom.mypicture.enums.WeChatAppStatusEnum;import com.kucaroom.mypicture.util.KeyUtil;import lombok.extern.slf4j.Slf4j;import org.junit.Assert;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.test.context.junit4.SpringRunner;import org.springframework.transaction.annotation.Transactional;import java.util.Optional;@RunWith(SpringRunner.class)@SpringBootTest@Slf4j@Transactionalpublic class WeChatAppRepositoryTest {    @Autowired    private WeChatAppRepository weChatAppRepository;    @Test    @Transactional    public void create(){        WeChatApp app = new WeChatApp();        app.setName("唯美图吧");        app.setAppKey("zxcvb");        app.setAppSecret("bingbing");        app.setAllianceKey(KeyUtil.key());        app.setDomain("http://baidu.com");        app.setMobile("13425144866");        app.setCollegeId(1);        app.setServiceId(1);        app.setStatus(WeChatAppStatusEnum.AUDIT.getCode());        WeChatApp result= weChatAppRepository.save(app);        Assert.assertNotNull(result);    }    @Test    @Transactional    public  void findOne(){        WeChatApp app = new WeChatApp();        app.setName("唯美图吧");        app.setAppKey(KeyUtil.key());        app.setAppSecret(KeyUtil.generateKey(32));        app.setAllianceKey(KeyUtil.key());        app.setDomain("http://baidu.com");        app.setMobile("13425144866");        app.setCollegeId(1);        app.setServiceId(1);        app.setStatus(WeChatAppStatusEnum.AUDIT.getCode());        WeChatApp weChatApp= weChatAppRepository.save(app);        Optional<WeChatApp> result = weChatAppRepository.findById(weChatApp.getId());        Assert.assertNotNull(result);    }    @Test    @Transactional    public void findByAllianceKey() {        WeChatApp app = new WeChatApp();        app.setName("唯美图吧");        app.setAppKey(KeyUtil.key());        app.setAppSecret(KeyUtil.generateKey(32));        app.setAllianceKey(KeyUtil.key());        app.setDomain("http://baidu.com");        app.setMobile("13425144866");        app.setCollegeId(1);        app.setServiceId(1);        app.setStatus(WeChatAppStatusEnum.AUDIT.getCode());        WeChatApp weChatApp= weChatAppRepository.save(app);        WeChatApp result = weChatAppRepository.findByAllianceKey(weChatApp.getAllianceKey());        Assert.assertEquals(app.getAllianceKey(),result.getAllianceKey());    }}