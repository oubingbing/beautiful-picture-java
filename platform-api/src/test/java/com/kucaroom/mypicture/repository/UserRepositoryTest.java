package com.kucaroom.mypicture.repository;import com.kucaroom.mypicture.domain.User;import com.kucaroom.mypicture.util.KeyUtil;import lombok.extern.slf4j.Slf4j;import org.junit.Assert;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.test.context.junit4.SpringRunner;import org.springframework.transaction.annotation.Transactional;import java.util.List;@RunWith(SpringRunner.class)@SpringBootTest@Transactional@Slf4jpublic class UserRepositoryTest {    @Autowired    private UserRepository repository;    @Test    public void uuidKeyTest(){        log.info("随机字符串：" + KeyUtil.key());    }    @Test    public void create(){        String openId = KeyUtil.generateKey(32);        User user = new User();        user.setAppId(77);        user.setNickname("叶子");        user.setOpenId(openId);        user.setAvatar("http://baidu.com");        user.setCity("深圳");        user.setGender(1);        user.setMobile("13425144866");        user.setPassword(KeyUtil.key());        user.setProvince("广东");        User result = repository.save(user);        Assert.assertEquals(result.getOpenId(),openId);    }    @Test    public void findByOpenIdTest() {        String openId = KeyUtil.generateKey(32);        User user = new User();        user.setAppId(77);        user.setNickname("叶子");        user.setOpenId(openId);        user.setAvatar("http://baidu.com");        user.setCity("深圳");        user.setGender(1);        user.setMobile("13425144866");        user.setPassword(KeyUtil.key());        user.setProvince("广东");        User result = repository.save(user);        User findUser = repository.findByOpenId(result.getOpenId());        Assert.assertEquals(result.getOpenId(),findUser.getOpenId());    }    @Test    public void findByAppId() {        String openId = KeyUtil.generateKey(32);        User user = new User();        user.setAppId(77);        user.setNickname("叶子");        user.setOpenId(openId);        user.setAvatar("http://baidu.com");        user.setCity("深圳");        user.setGender(1);        user.setMobile("13425144866");        user.setPassword(KeyUtil.key());        user.setProvince("广东");        User result = repository.save(user);        List<User> userList = repository.findByAppId(result.getAppId());        Assert.assertNotEquals(0,userList.size());    }}