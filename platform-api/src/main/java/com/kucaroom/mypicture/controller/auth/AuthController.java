package com.kucaroom.mypicture.controller.auth;import com.kucaroom.mypicture.DTO.UserDTO;import com.kucaroom.mypicture.enums.ResponseEnum;import com.kucaroom.mypicture.exception.ApiException;import com.kucaroom.mypicture.form.LoginForm;import com.kucaroom.mypicture.responseObject.UserRO;import com.kucaroom.mypicture.service.UserService;import com.kucaroom.mypicture.util.JwtUtil;import com.kucaroom.mypicture.util.ResponseData;import com.kucaroom.mypicture.util.ResponseUtil;import lombok.extern.slf4j.Slf4j;import org.springframework.beans.BeanUtils;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.*;import java.util.HashMap;import java.util.Map;@RestController@RequestMapping("/auth")@Slf4jpublic class AuthController {    @Autowired    private UserService userService;    @Autowired    private JwtUtil jwtUtil;    /**     * 微信登录小程序     *     * @param loginForm     * @return     */    @PostMapping("/login")    public ResponseData login(@RequestBody LoginForm loginForm){        UserDTO result = userService.userLogin(loginForm);        if(result == null){            throw new ApiException(ResponseEnum.USER_LOGIN_FAIL);        }        String token = jwtUtil.create(result.getOpenId());        Map<String,String> map = new HashMap<>();        map.put("token",token);        map.put("message","登录成功！");        return ResponseUtil.success(map);    }}