package com.kucaroom.mypicture.service.impl;import com.kucaroom.mypicture.DTO.UserDTO;import com.kucaroom.mypicture.domain.DownLoadPictureLog;import com.kucaroom.mypicture.domain.PictureItem;import com.kucaroom.mypicture.enums.ResponseEnum;import com.kucaroom.mypicture.exception.ApiException;import com.kucaroom.mypicture.repository.DownLoadPictureLogRepository;import com.kucaroom.mypicture.service.DownloadPictureLogService;import com.kucaroom.mypicture.service.PictureItemService;import com.kucaroom.mypicture.service.UserService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;@Servicepublic class DownloadPictureLogServiceImpl implements DownloadPictureLogService {    @Autowired    private DownLoadPictureLogRepository repository;    @Autowired    private UserService userService;    @Autowired    private PictureItemService pictureItemService;    /**     * 保存图片下载记录     *     * @author yezi     * @param userId     * @param pictureItemId     * @return     */    @Override    public DownLoadPictureLog create(Integer userId, Integer pictureItemId) {        UserDTO userDTO = userService.finById(userId);        if(userDTO == null){            throw new ApiException(ResponseEnum.USER_NOT_EXIST);        }        PictureItem pictureItem = pictureItemService.findById(pictureItemId);        if(pictureItem == null){            throw new ApiException(ResponseEnum.PICTURE_ITEM_NOT_EXIST);        }        DownLoadPictureLog log = new DownLoadPictureLog();        log.setUserId(userId);        log.setPictureItemId(pictureItemId);        DownLoadPictureLog result = repository.save(log);        if(result == null){            throw new ApiException(ResponseEnum.PICTURE_DOWNLOAD_LOG_FAIL);        }        return result;    }}